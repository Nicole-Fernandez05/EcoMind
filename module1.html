<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ecomind - Module 1</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="css/cssmodules.css">
</head>
<body>
    <header class="header">
        <div class="header-left">
            <button class="hamburger-icon" id="hamburger-icon">☰</button>
            <div class="logo">
                <span class="logo-icon">
                    <img src="https://i.ibb.co/8gNQ5CpH/logo.png" alt="Leaf Icon">
                </span>
                ECOMIND
            </div>
        </div>
        <nav class="top-nav-links">
            <a href="homepage.html" class="active">Home</a>
            <a href="modulehomepage.html">Modules</a>
            <a href="gamehomepage.html">Game</a>
            <a href="login.html" class="login-btn">Login</a>
        </nav>
    </header>

    <div class="sidebar-container" id="sidebar-container">
        <aside class="sidebar-menu" id="sidebar-menu">
            <button class="close-sidebar-btn" id="close-sidebar-btn">×</button>
            <ul class="sidebar-links">
                <li><a href="homepage.html">Home</a></li>
                <li><a href="modulehomepage.html" class="active">Modules</a></li>
                <li><a href="finalhomepage.html">Final Assessment</a></li>
            </ul>
        </aside>
    </div>

    <main id="main-content">
        <div class="header-title-section">
            <div class="title-box">
                <h1>MODULE 1</h1>
                <h2>Introduction to Waste Segregation</h2>
            </div>
        </div>

        <div class="font-size-controls">
            <span>Font Size:</span>
            <button id="decrease-font-btn" class="font-size-button">-</button>
            <button id="reset-font-btn" class="font-size-button">Reset</button>
            <button id="increase-font-btn" class="font-size-button">+</button>
        </div>

        <div class="interactive-sections-grid">
            <div class="content-section">
                <button id="infographics-btn" class="section-button">
                    Infographics
                </button>
                <div id="infographics-content" class="content-display">
                    Click on the infographic to open it in full view. Explore key facts, visuals, and data at a glance to help you better understand the topic.
                </div>
            </div>

            <div class="content-section">
                <button id="video-btn" class="section-button">
                    Video
                </button>
                <div id="video-content" class="content-display">
                    Tap to play the video and dive deeper into the subject. Watch at your own pace and absorb insights through engaging visuals and expert explanations.
                </div>
            </div>

            <div class="content-section">
                <button id="explanation-btn" class="section-button">
                    Explanation
                </button>
                <div id="explanation-content" class="content-display">
                    Click "Explanation" to learn more.
                </div>
            </div>

            <div class="content-section">
                <button id="quiz-btn" class="section-button">
                    Quiz
                </button>
                <div id="quiz-content" class="content-display">
                    Think you’ve got it down? Click to start the quiz and put your knowledge to the test. It’s a quick and fun way to review what you’ve learned!
                </div>
            </div>
            <div class="navigation-buttons">
                <button id="back-btn" class="section-button">Back</button>
            </div>
        </div>
    </main>

    <footer class="footer">
        <div class="container footer-content">
            <div class="footer-column">
                <h3>ECOMIND</h3>
                <div class="footer-social-icons">
                    <a href="#"><i class="fab fa-instagram"></i> Instagram</a>
                    <a href="#"><i class="fab fa-twitter"></i> Twitter</a>
                    <a href="#"><i class="fab fa-facebook-f"></i> Facebook</a>
                    <a href="#"><i class="fab fa-pinterest"></i> Pinterest</a>
                </div>
            </div>
            <div class="footer-column">
                <h3>About Us</h3>
                <ul>
                    <li><a href="#">About Ecomind</a></li>
                    <li><a href="#">Vision & Mission</a></li>
                    <li><a href="#">Partnership</a></li>
                    <li><a href="#">Sustainability</a></li>
                </ul>
            </div>
            <div class="footer-column">
                <h3>Contact Us</h3>
                <ul>
                    <li>1-800-555-5555</li>
                    <li><a href="#">Join us</a></li>
                    <li><a href="#">Email us</a></li>
                    <li><a href="#">Customer Support</a></li>
                </ul>
            </div>
            <div class="footer-column">
                <h3>Learning</h3>
                <ul>
                    <li><a href="#">Modules</a></li>
                    <li><a href="#">Quizzes</a></li>
                    <li><a href="#">Games</a></li>
                    <li><a href="#">Volunteers</a></li>
                </ul>
            </div>
        </div>
        <div class="footer-bottom">
            <span>© 2049 Fitma</span>
            <a href="#">Fitma Policies</a>
            <a href="#">Terms of Use</a>
            <a href="#">About us</a>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Sidebar and Header JS
            const hamburgerIcon = document.getElementById('hamburger-icon');
            const closeSidebarBtn = document.getElementById('close-sidebar-btn');
            const sidebarContainer = document.getElementById('sidebar-container');
            const sidebarMenu = document.getElementById('sidebar-menu');

            hamburgerIcon.addEventListener('click', () => {
                sidebarContainer.classList.add('open');
                sidebarMenu.classList.add('open');
                document.body.style.overflow = 'hidden';
            });

            closeSidebarBtn.addEventListener('click', () => {
                sidebarContainer.classList.remove('open');
                sidebarMenu.classList.remove('open');
                document.body.style.overflow = '';
            });

            sidebarContainer.addEventListener('click', (event) => {
                if (event.target === sidebarContainer) {
                    sidebarContainer.classList.remove('open');
                    sidebarMenu.classList.remove('open');
                    document.body.style.overflow = '';
                }
            });

            const sidebarLinks = document.querySelectorAll('.sidebar-links a');
            sidebarLinks.forEach(link => {
                link.addEventListener('click', () => {
                    sidebarContainer.classList.remove('open');
                    sidebarMenu.classList.remove('open');
                    document.body.style.overflow = '';
                });
            });

            // Module Page Specific JS (Font Size and Content Toggling)
            const infographicsBtn = document.getElementById('infographics-btn');
            const videoBtn = document.getElementById('video-btn');
            const explanationBtn = document.getElementById('explanation-btn');
            const quizBtn = document.getElementById('quiz-btn');

            const infographicsContent = document.getElementById('infographics-content');
            const videoContent = document.getElementById('video-content');
            const explanationContent = document.getElementById('explanation-content');
            const quizContent = document.getElementById('quiz-content');

            const increaseFontBtn = document.getElementById('increase-font-btn');
            const decreaseFontBtn = document.getElementById('decrease-font-btn');
            const resetFontBtn = document.getElementById('reset-font-btn');

            const mainContent = document.getElementById('main-content');

            const defaultExplanationContent = `
                <div class="content-text-default">
                    Click to view a detailed explanation that breaks the topic down into simple explanations. Great for building a deeper understanding at your own pace.
                </div>
            `;

            const defaultInfographicsContent = `
                <div class="content-text-default">
                    Click on the infographic to open it in full view. Explore key facts, visuals, and data at a glance to help you better understand the topic.
                </div>
            `;

            const defaultVideoContent = `
                <div class="content-text-default">
                    Tap to play the video and dive deeper into the subject. Watch at your own pace and absorb insights through engaging visuals and expert explanations.
                </div>
            `;

            const defaultQuizContent = `
                <div class="content-text-default">
                    Think you’ve got it down? Click to start the quiz and put your knowledge to the test. It’s a quick and fun way to review what you’ve learned!
                </div>
            `;

            let initialMainFontSize;
            let currentMainFontSize;
            const FONT_SIZE_STEP = 1;
            const MAX_FONT_SIZE_DIFF = 5;

            // Flags to track if content sections have been visited
            let infographicsVisited = false;
            let videoVisited = false;
            let explanationVisited = false;

            function updateContent(element, content) {
                element.innerHTML = content;
            }

            function setMainContentFontSize(size) {
                mainContent.style.setProperty('--base-font-size', `${size}px`);
                localStorage.setItem('userMainFontSize', size);
            }

            function loadFontSize() {
                const savedFontSize = localStorage.getItem('userMainFontSize');
                if (savedFontSize) {
                    currentMainFontSize = parseFloat(savedFontSize);
                    setMainContentFontSize(currentMainFontSize);
                }
            }

            // Function to update button states based on visited flags
            function updateButtonStates() {
                videoBtn.disabled = !infographicsVisited;
                explanationBtn.disabled = !videoVisited;
                quizBtn.disabled = !explanationVisited;
            }

            increaseFontBtn.addEventListener('click', () => {
                if (currentMainFontSize < initialMainFontSize + MAX_FONT_SIZE_DIFF) {
                    currentMainFontSize += FONT_SIZE_STEP;
                    setMainContentFontSize(currentMainFontSize);
                }
            });

            decreaseFontBtn.addEventListener('click', () => {
                if (currentMainFontSize > initialMainFontSize - MAX_FONT_SIZE_DIFF) {
                    currentMainFontSize -= FONT_SIZE_STEP;
                    setMainContentFontSize(currentMainFontSize);
                }
            });

            resetFontBtn.addEventListener('click', () => {
                currentMainFontSize = initialMainFontSize;
                setMainContentFontSize(currentMainFontSize);
            });

            function toggleContent(buttonId, contentElement, newContent, defaultContent, isExternalLink = false) {
                if (isExternalLink) {
                    window.location.href = newContent;
                    return;
                }

                const allContentElements = [infographicsContent, videoContent, explanationContent, quizContent];
                const allDefaultContents = [defaultInfographicsContent, defaultVideoContent, defaultExplanationContent, defaultQuizContent];

                allContentElements.forEach((element, index) => {
                    if (element !== contentElement && element.innerHTML.trim() !== allDefaultContents[index].trim()) {
                        updateContent(element, allDefaultContents[index]);
                    }
                });

                if (contentElement.innerHTML.trim() === defaultContent.trim()) {
                    updateContent(contentElement, newContent);
                } else {
                    updateContent(contentElement, defaultContent);
                }

                // Mark the corresponding section as visited
                if (buttonId === 'infographics-btn') {
                    infographicsVisited = true;
                } else if (buttonId === 'video-btn') {
                    videoVisited = true;
                } else if (buttonId === 'explanation-btn') {
                    explanationVisited = true;
                }

                updateButtonStates(); // Update button states after each interaction
            }

            infographicsBtn.addEventListener('click', () => {
                const infographicsHtml = `
                   <div class="inner-content-wrapper">
    <div class="image-gallery">
        <img src="https://i.ibb.co/gZBrS6CK/infographic11.jpg" alt="Infographic 1" />
        <img src="https://i.ibb.co/NnCmmCGj/infographic12.jpg" alt="Infographic 2" />
        <img src="https://i.ibb.co/TxBKzkcY/infographic13.jpg" alt="Infographic 3" />
    </div>
    <button id="close-infographics-btn" class="close-button">Close Infographics</button>
    <a href="#" class="content-link">Top (Optional)</a>
</div>
                `;
                toggleContent('infographics-btn', infographicsContent, infographicsHtml, defaultInfographicsContent);

                const closeInfographicsBtn = document.getElementById('close-infographics-btn');
                if (closeInfographicsBtn) {
                    closeInfographicsBtn.addEventListener('click', () => {
                        updateContent(infographicsContent, defaultInfographicsContent);
                    });
                }
            });

            videoBtn.addEventListener('click', () => {
                const videoHtml = `
                    <div class="inner-content-wrapper">
                        <h3>Educational Video: Why Waste Segregation is Important</h3>
                        <div class="video-container">
                            <iframe class="video-iframe" src="https://www.youtube.com/embed/0ZiD_Lb3Tm0" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                        </div>
                        <p class="video-description-paragraph">Waste segregation is the practice of separating waste into different categories, such as organic, recyclable, and hazardous materials. By doing this, we can ensure that each type of waste is disposed of properly, reducing pollution, conserving resources, and promoting a healthier planet.</p>
                        <button id="close-video-btn" class="close-button">
                            Close Video
                        </button>
                    </div>
                `;
                toggleContent('video-btn', videoContent, videoHtml, defaultVideoContent);

                const closeVideoBtn = document.getElementById('close-video-btn');
                if (closeVideoBtn) {
                    closeVideoBtn.addEventListener('click', () => {
                        updateContent(videoContent, defaultVideoContent);
                    });
                }
            });

            explanationBtn.addEventListener('click', () => {
                const explanationHtml = `
                    <div class="inner-content-wrapper explanation-content-inner-wrapper">
                        <p class="explanation-title">Waste segregation, environmental protection, recycling and resource recovery, efficient waste management, public health and safety, sustainable practices, and the global waste challenge.</p><br>
                        <p>Sorting waste into categories prevents pollution and supports recycling. It keeps soil, water, and air clean. Recyclables can be reused, saving resources. Waste is easier to collect, transport, and dispose of. Proper handling reduces disease and toxic exposure. Responsible waste habits and a circular economy are encouraged. Over 2 billion tons of waste are poorly managed, but segregation helps reduce this impact.</p>
                        <button id="close-explanation-btn" class="close-button">
                            Close Explanation
                        </button>
                    </div>
                `;
                toggleContent('explanation-btn', explanationContent, explanationHtml, defaultExplanationContent);

                const closeExplanationBtn = document.getElementById('close-explanation-btn');
                if (closeExplanationBtn) {
                    closeExplanationBtn.addEventListener('click', () => {
                        updateContent(explanationContent, defaultExplanationContent);
                    });
                }
            });

            quizBtn.addEventListener('click', () => {
                toggleContent('quiz-btn', quizContent, 'M1quizhomepage.html', defaultQuizContent, true);
            });

            // Navigation buttons
            const backBtn = document.getElementById('back-btn');

            const previousPageUrl = 'modulehomepage.html'; // Replace with the actual URL
            backBtn.addEventListener('click', () => {
                window.location.href = previousPageUrl;
            });


            function initializePage() {
                if (mainContent) {
                    initialMainFontSize = parseFloat(getComputedStyle(mainContent).fontSize);
                    currentMainFontSize = initialMainFontSize;
                }

                updateContent(explanationContent, defaultExplanationContent);
                updateContent(infographicsContent, defaultInfographicsContent);
                updateContent(videoContent, defaultVideoContent);
                updateContent(quizContent, defaultQuizContent);
                loadFontSize();

                // Set initial button states
                updateButtonStates();
            }

            initializePage();
        });
    </script>
</body>
</html>

